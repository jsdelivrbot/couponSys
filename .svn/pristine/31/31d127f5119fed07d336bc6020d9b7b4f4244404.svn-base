webpackJsonp([9],{"0ZCn":function(e,t,a){var n=a("7rrm");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("8bSs")("7ded71d3",n,!0)},"7rrm":function(e,t,a){t=e.exports=a("BkJT")(!0),t.push([e.i,".search-span[data-v-49c8e238]{display:inline-block;width:140px;text-align:right}.el-col[data-v-49c8e238]{margin-bottom:20px}.notes[data-v-49c8e238]{margin-left:30px}.el-textarea[data-v-49c8e238]{vertical-align:top}.btn-group[data-v-49c8e238]{margin-top:40px;text-align:center}","",{version:3,sources:["E:/Coupon/pages/src/pages/coupon/Addplatform.vue"],names:[],mappings:"AACA,8BACE,qBAAsB,AACtB,YAAa,AACb,gBAAkB,CACnB,AACD,yBACE,kBAAoB,CACrB,AACD,wBACE,gBAAkB,CACnB,AACD,8BACE,kBAAoB,CACrB,AACD,4BACE,gBAAiB,AACjB,iBAAmB,CACpB",file:"Addplatform.vue",sourcesContent:["\n.search-span[data-v-49c8e238] {\n  display: inline-block;\n  width: 140px;\n  text-align: right;\n}\n.el-col[data-v-49c8e238] {\n  margin-bottom: 20px;\n}\n.notes[data-v-49c8e238] {\n  margin-left: 30px;\n}\n.el-textarea[data-v-49c8e238] {\n  vertical-align: top;\n}\n.btn-group[data-v-49c8e238] {\n  margin-top: 40px;\n  text-align: center;\n}\n"],sourceRoot:""}])},J0Oq:function(e,t,a){"use strict";t.__esModule=!0;var n=a("rVsN"),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,a){function n(o,i){try{var l=t[o](i),s=l.value}catch(e){return void a(e)}if(!l.done)return r.default.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}return n("next")})}}},JuXF:function(e,t,a){var n=function(){return this}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=a("mVJ2"),r)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},S35o:function(e,t,a){"use strict";var n=a("lC5x"),r=a.n(n),o=a("J0Oq"),i=a.n(o);t.a={name:"addlecheng",data:function(){return{postUrl:host+"/couponSys/fileUtil/uploadCodeFile.json",id:this.$route.query.id||null,code:"",createTime:"",username:"",creater:"",name:"",type:3,couponAmt:"",thresholdType:1,thresholdAmt:"",issuanceQty:0,remainQty:"",validityType:1,validityDay:"",deadTime:"",startTime:"",endTime:"",notice:"",availableStartTime:"",availableEndTime:"",mbeGrade:"",limitType:1,limitQty:"",isPublic:!1,isShared:!1,vstatus:1,fileList:[],codeFile:"",loading:!1}},mounted:function(){null==this.id?this.getCode():this.initInfo()},methods:{initInfo:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:e.id},t.next=3,e.$get("/couponSys/couponSchemeOutplatform/toUpdate.json",a);case 3:n=t.sent,e.code=n.couponInfoDetail.code,e.name=n.couponInfoDetail.name,e.username=n.couponInfoDetail.createrName,e.creater=n.couponInfoDetail.creater,e.createTime=n.couponInfoDetail.createTime,e.thresholdType=n.couponInfoDetail.thresholdType,e.couponAmt=n.couponInfoDetail.couponAmt,e.thresholdAmt=n.couponInfoDetail.thresholdAmt,e.issuanceQty=n.couponInfoDetail.issuanceQty,e.validityType=n.couponInfoDetail.validityType,e.validityDay=n.couponInfoDetail.validityDay,e.deadTime=e.$format(n.couponInfoDetail.deadTime),e.startTime=e.$format(n.couponInfoDetail.startTime),e.endTime=e.$format(n.couponInfoDetail.endTime),e.notice=n.couponInfoDetail.notice,e.availableStartTime=e.$format(n.couponInfoDetail.availableStartTime),e.availableEndTime=e.$format(n.couponInfoDetail.availableEndTime),e.mbeGrade=n.couponInfoDetail.mbeGrade.split(","),e.limitType=n.couponInfoDetail.limitType,e.limitQty=n.couponInfoDetail.limitQty,e.isPublic=1==n.couponInfoDetail.isPublic,e.isShared=1==n.couponInfoDetail.isShared,e.vstatus=n.couponInfoDetail.vstatus,e.codeFile=n.couponInfoDetail.codeFile;case 28:case"end":return t.stop()}},t,e)}))()},getCode:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/couponSys/couponSchemeOutplatform/create.json");case 2:a=t.sent,e.code=a.code,e.createTime=e.$format(a.createTime),n=unescape(sessionStorage.getItem("userinfo")),n&&(n=JSON.parse(n),e.creater=n.id,e.username=n.name);case 7:case"end":return t.stop()}},t,e)}))()},saveInfo:function(){var e=this;return i()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={id:e.id,code:e.code,createTime:e.$format(e.createTime),creater:e.creater,name:e.name,type:e.type,couponAmt:e.couponAmt,thresholdType:e.thresholdType,thresholdAmt:e.thresholdAmt,issuanceQty:e.issuanceQty,remainQty:e.remainQty,validityType:e.validityType,validityDay:e.validityDay,deadTime:e.$format(e.deadTime),startTime:e.$format(e.startTime),endTime:e.$format(e.endTime),notice:e.notice,availableStartTime:e.$format(e.availableStartTime),availableEndTime:e.$format(e.availableEndTime),mbeGrade:e.mbeGrade.join(","),limitType:e.limitType,limitQty:e.limitQty,isPublic:e.isPublic?1:2,isShared:e.isShared?1:2,vstatus:e.vstatus,codeFile:e.codeFile},e.loading=!0,n=void 0,null!=e.id){t.next=9;break}return t.next=6,e.$post("/couponSys/couponSchemeOutplatform/add.json",a);case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,e.$post("/couponSys/couponSchemeOutplatform/update.json",a);case 11:n=t.sent;case 12:e.loading=!1,0==n.errcode?(e.$message.success(null==e.id?"添加成功":"修改成功"),eventBus.$emit("resetPlatformlist"),e.$router.go(-1)):e.$message.error(n.msg);case 14:case"end":return t.stop()}},t,e)}))()},goBack:function(){this.$router.go(-1)},handleAvatarSuccess:function(e,t){0==e.errcode&&(this.fileList=[],this.fileList.push(t),this.codeFile=e.fileName,console.log(this.codeFile))}}}},jNi0:function(e,t,a){"use strict";function n(e){a("0ZCn")}Object.defineProperty(t,"__esModule",{value:!0});var r=a("S35o"),o=a("wSvh"),i=a("/Xao"),l=n,s=i(r.a,o.a,!1,l,"data-v-49c8e238",null);t.default=s.exports},lC5x:function(e,t,a){e.exports=a("JuXF")},mVJ2:function(e,t){!function(t){"use strict";function a(e,t,a,n){var o=t&&t.prototype instanceof r?t:r,i=Object.create(o.prototype),l=new v(n||[]);return i._invoke=c(e,a,l),i}function n(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}function r(){}function o(){}function i(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(a,r,o,i){var l=n(e[a],e,r);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==typeof c&&g.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,i)},function(e){t("throw",e,o,i)}):Promise.resolve(c).then(function(e){s.value=e,o(s)},i)}i(l.arg)}function a(e,a){function n(){return new Promise(function(n,r){t(e,a,n,r)})}return r=r?r.then(n,n):n()}var r;this._invoke=a}function c(e,t,a){var r=C;return function(o,i){if(r===S)throw new Error("Generator is already running");if(r===E){if("throw"===o)throw i;return f()}for(a.method=o,a.arg=i;;){var l=a.delegate;if(l){var s=u(l,a);if(s){if(s===D)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===C)throw r=E,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=S;var c=n(e,t,a);if("normal"===c.type){if(r=a.done?E:k,c.arg===D)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(r=E,a.method="throw",a.arg=c.arg)}}}function u(e,t){var a=e.iterator[t.method];if(a===h){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=h,u(e,t),"throw"===t.method))return D;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var r=n(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,D;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=h),t.delegate=null,D):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,D)}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function m(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(g.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=h,t.done=!0,t};return n.next=n}}return{next:f}}function f(){return{value:h,done:!0}}var h,y=Object.prototype,g=y.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",T=_.toStringTag||"@@toStringTag",w="object"==typeof e,A=t.regeneratorRuntime;if(A)return void(w&&(e.exports=A));A=t.regeneratorRuntime=w?e.exports:{},A.wrap=a;var C="suspendedStart",k="suspendedYield",S="executing",E="completed",D={},I={};I[b]=function(){return this};var L=Object.getPrototypeOf,B=L&&L(L(m([])));B&&B!==y&&g.call(B,b)&&(I=B);var $=i.prototype=r.prototype=Object.create(I);o.prototype=$.constructor=i,i.constructor=o,i[T]=o.displayName="GeneratorFunction",A.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},A.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,T in e||(e[T]="GeneratorFunction")),e.prototype=Object.create($),e},A.awrap=function(e){return{__await:e}},l(s.prototype),s.prototype[x]=function(){return this},A.AsyncIterator=s,A.async=function(e,t,n,r){var o=new s(a(e,t,n,r));return A.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},l($),$[T]="Generator",$[b]=function(){return this},$.toString=function(){return"[object Generator]"},A.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},A.values=m,v.prototype={constructor:v,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,a.next=t,n&&(a.method="next",a.arg=h),!!n}if(this.done)throw e;for(var a=this,n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var i=g.call(r,"catchLoc"),l=g.call(r,"finallyLoc");if(i&&l){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,D):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),D},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),d(a),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;d(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:m(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=h),D}}}(function(){return this}()||Function("return this")())},wSvh:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"breadcrumb"},[e._v("券方案/"+e._s(null==e.id?"创建":"编辑")+"外平台券方案")]),e._v(" "),a("div",{staticClass:"create-info"},[a("span",[e._v("券方案编码："+e._s(e.code))]),e._v(" "),a("span",{staticClass:"fr"},[e._v("创建人："+e._s(e.username)+" | 创建时间："+e._s(e.$format(e.createTime)))])]),e._v(" "),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-row",[a("el-col",{staticClass:"module-title"},[e._v("基本设置")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"search-span"},[e._v("劵方案名称：")]),e._v(" "),a("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"优惠券名称不可以超过25个字符"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span fl"},[e._v("上传劵码文件：")]),e._v(" "),a("el-upload",{staticClass:"fl",staticStyle:{"margin-left":"5px"},attrs:{action:e.postUrl,name:"files",accept:".csv",drag:"","on-success":e.handleAvatarSuccess,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传.csv格式文件，且不超过1M")])])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"},[e._v("优惠券类型：")]),e._v(" "),a("el-button",{attrs:{type:1==e.thresholdType?"primary":""},on:{click:function(t){e.thresholdType=1}}},[e._v("满减券")]),e._v(" "),a("el-button",{attrs:{type:2==e.thresholdType?"primary":""},on:{click:function(t){e.thresholdType=2}}},[e._v("无门槛代金券")])],1)],1),e._v(" "),a("el-row",[1==e.thresholdType?a("el-col",[a("span",{staticClass:"search-span"},[e._v("优惠券面值：")]),e._v(" "),a("span",[e._v("订单满")]),a("el-input",{staticStyle:{width:"80px",margin:"0 10px"},model:{value:e.thresholdAmt,callback:function(t){e.thresholdAmt=t},expression:"thresholdAmt"}}),a("span",[e._v("减")]),a("el-input",{staticStyle:{width:"80px",margin:"0 10px"},model:{value:e.couponAmt,callback:function(t){e.couponAmt=t},expression:"couponAmt"}}),a("span",[e._v("元")])],1):e._e(),e._v(" "),2==e.thresholdType?a("el-col",[a("span",{staticClass:"search-span"},[e._v("优惠券面值：")]),e._v(" "),a("el-input",{staticStyle:{width:"80px","margin-right":"10px"},model:{value:e.couponAmt,callback:function(t){e.couponAmt=t},expression:"couponAmt"}}),a("span",[e._v("元")])],1):e._e()],1),e._v(" "),a("el-row",[a("el-col",{attrs:{md:8}},[a("span",{staticClass:"search-span"},[e._v("总发行量：")]),e._v(" "),a("span",[e._v(e._s(e.issuanceQty)+"张")])])],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"},[e._v("优惠券有效期：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.validityType,callback:function(t){e.validityType=t},expression:"validityType"}},[a("el-option",{attrs:{label:"截止日期至",value:1}}),e._v(" "),a("el-option",{attrs:{label:"自定义时间段",value:2}}),e._v(" "),a("el-option",{attrs:{label:"领取后",value:3}})],1),e._v(" "),1==e.validityType?[a("el-date-picker",{attrs:{editable:!1,type:"datetime",placeholder:"截止时间"},model:{value:e.deadTime,callback:function(t){e.deadTime=t},expression:"deadTime"}})]:e._e(),e._v(" "),2==e.validityType?[a("el-date-picker",{attrs:{editable:!1,type:"datetime",placeholder:"开始时间"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("span",[e._v("至")]),e._v(" "),a("el-date-picker",{attrs:{editable:!1,type:"datetime",placeholder:"结束时间"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})]:e._e(),e._v(" "),3==e.validityType?[a("span",[e._v("至领券之日起")]),a("el-input",{staticStyle:{width:"80px",margin:"0 10px"},model:{value:e.validityDay,callback:function(t){e.validityDay=t},expression:"validityDay"}}),a("span",[e._v("天")])]:e._e()],2)],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"},[e._v("使用须知：")]),e._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea",rows:4,placeholder:"请详细描述该优惠券使用的说明内容，不超过500个字符"},model:{value:e.notice,callback:function(t){e.notice=t},expression:"notice"}})],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"module-title"},[e._v("推广设置")])],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"},[e._v("可领取时间：")]),e._v(" "),a("el-date-picker",{attrs:{editable:!1,type:"datetime",placeholder:"开始时间"},model:{value:e.availableStartTime,callback:function(t){e.availableStartTime=t},expression:"availableStartTime"}}),e._v(" "),a("span",[e._v("至")]),e._v(" "),a("el-date-picker",{attrs:{editable:!1,type:"datetime",placeholder:"结束时间"},model:{value:e.availableEndTime,callback:function(t){e.availableEndTime=t},expression:"availableEndTime"}})],1)],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"},[e._v("限领设置：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.limitType,callback:function(t){e.limitType=t},expression:"limitType"}},[a("el-option",{attrs:{label:"每人限领",value:1}}),e._v(" "),a("el-option",{attrs:{label:"活动期间每人限领",value:2}}),e._v(" "),a("el-option",{attrs:{label:"活动期间每人每日限领",value:3}})],1),e._v(" "),a("el-input",{staticStyle:{width:"80px",margin:"0 10px"},model:{value:e.limitQty,callback:function(t){e.limitQty=t},expression:"limitQty"}}),a("span",[e._v("张")])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"},[e._v("会员等级：")]),e._v(" "),a("el-select",{attrs:{multiple:"",placeholder:"选择会员等级"},model:{value:e.mbeGrade,callback:function(t){e.mbeGrade=t},expression:"mbeGrade"}},[a("el-option",{attrs:{label:"普卡",value:"251"}}),e._v(" "),a("el-option",{attrs:{label:"银卡",value:"252"}}),e._v(" "),a("el-option",{attrs:{label:"金卡",value:"253"}}),e._v(" "),a("el-option",{attrs:{label:"钻石卡",value:"254"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"}),e._v(" "),a("el-checkbox",{model:{value:e.isPublic,callback:function(t){e.isPublic=t},expression:"isPublic"}},[e._v("领券中心页面显示该券方案")])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("span",{staticClass:"search-span"}),e._v(" "),a("el-checkbox",{model:{value:e.isShared,callback:function(t){e.isShared=t},expression:"isShared"}},[e._v("领券链接可被分享")])],1)],1),e._v(" "),a("el-row",{staticClass:"btn-group"},[a("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.saveInfo}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.goBack}},[e._v("返回")])],1)],1)],1)},r=[],o={render:n,staticRenderFns:r};t.a=o}});
//# sourceMappingURL=9.25e3b9b56a15ef5311d6.js.map